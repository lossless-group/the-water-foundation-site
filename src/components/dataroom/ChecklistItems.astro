---
type ChecklistItem = {
  label: string;
  children?: ChecklistItem[];
};

type Props = {
  items: ChecklistItem[];
  depth?: number;
};

const { items: rawItems, depth = 0 } = Astro.props;

const items = Array.isArray(rawItems) ? rawItems : [];
---

<ul class={depth === 0 ? 'space-y-2' : 'mt-2 space-y-2 pl-4 border-l border-border'}>
  {items.map((item) => (
    <li class="text-sm text-foreground/80">
      <div class="flex items-start gap-2">
        <span
          class="mt-0.5 inline-flex h-5 w-5 items-center justify-center rounded-md border border-border bg-card text-xs text-foreground/60"
        >
          {depth === 0 ? '•' : '↳'}
        </span>
        <div class="min-w-0">
          <div class="font-medium text-foreground/90">{item.label}</div>
          {item.children && item.children.length > 0 ? (
            <Astro.self items={item.children} depth={depth + 1} />
          ) : null}
        </div>
      </div>
    </li>
  ))}
</ul>
