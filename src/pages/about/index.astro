---
// Immersive Story Flow Style
import BaseThemeLayout from '@layouts/BaseThemeLayout.astro';
import WhyNowJumbo from '@core-messages/WhyNow--Jumbo.astro';
import AtCrisisPointJumbo from '@core-messages/AtCrisisPoint--Jumbo.astro';
import GlobalIndicatorsTracker from '@core-messages/GlobalIndicatorsTracker.astro';
import InvestInTransformationJumbo from '@core-messages/InvestInTransformation--Jumbo.astro';
import SolutionSurgeJumbo from '@core-messages/SolutionSurge--Jumbo.astro';
import OurMissionJumbo from '@core-messages/OurMission--Jumbo.astro';
import UnsiloedFinanceJumbo from '@core-messages/UnsiloedFinance--Jumbo.astro';
import InnovationToScaleJumbo from '@core-messages/InnovationToScale--Jumbo.astro';
import WatersTripleChallenge from '@core-messages/WatersTripleChallenge.astro';
---

<BaseThemeLayout
  title="About Us | The Water Foundation"
  description="Learn about our mission, team, and the principles that guide our work."
  themeClass="theme-water"
  containerClass="max-w-7xl mx-auto"
  ogImage="/ogImageLandscape__The-Water-Foundation.jpg"
  ogImagePortrait="/ogImagePortrait__The-Water-Foundation.jpg"
>
  <main class="overflow-x-hidden">
    
    <OurMissionJumbo />
    <section class="relative py-16 bg-gradient-to-br from-slate-800 via-blue-800 to-teal-800 overflow-hidden">
      <!-- Subtle Background Pattern -->
      <div class="absolute inset-0 opacity-5">
        <div class="absolute inset-0" style="background-image: radial-gradient(circle at 25% 25%, white 1px, transparent 1px), radial-gradient(circle at 75% 75%, white 1px, transparent 1px); background-size: 50px 50px;"></div>
      </div>
      <WatersTripleChallenge />
    </section>
    
    <WhyNowJumbo />
    <AtCrisisPointJumbo />
    <GlobalIndicatorsTracker />
    <InvestInTransformationJumbo />
    <SolutionSurgeJumbo />   
    <UnsiloedFinanceJumbo />
    <InnovationToScaleJumbo />
    
  </main>
</BaseThemeLayout>

<style>
  @keyframes slide-up {
    from {
      opacity: 0;
      transform: translateY(100px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  @keyframes expand {
    from {
      width: 0;
    }
    to {
      width: 8rem;
    }
  }
  
  @keyframes fade-in-up {
    from {
      opacity: 0;
      transform: translateY(50px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-slide-up {
    animation: slide-up 1s ease-out forwards;
  }
  
  .animate-slide-up-delay {
    animation: slide-up 1s ease-out 0.3s forwards;
    opacity: 0;
  }
  
  .animate-expand {
    animation: expand 1s ease-out 0.8s forwards;
    width: 0;
  }
  
  .animate-fade-in-up {
    animation: fade-in-up 1s ease-out 1.2s forwards;
    opacity: 0;
  }
  
  .parallax-text {
    transform: translateZ(0);
    transition: transform 0.3s ease-out;
  }
  
  .mission-card, .vertical-card {
    animation: fade-in-up 0.8s ease-out forwards;
    opacity: 0;
  }
  
  .mission-card:nth-child(1) { animation-delay: 0.2s; }
  .mission-card:nth-child(2) { animation-delay: 0.4s; }
  .mission-card:nth-child(3) { animation-delay: 0.6s; }
  
  .vertical-card:nth-child(1) { animation-delay: 0.1s; }
  .vertical-card:nth-child(2) { animation-delay: 0.3s; }
  .vertical-card:nth-child(3) { animation-delay: 0.5s; }
</style>

<script>
  // Parallax effect for text elements
  document.addEventListener('scroll', function() {
    const scrolled = window.pageYOffset;
    const parallaxElements = document.querySelectorAll('.parallax-text');
    
    parallaxElements.forEach(function(element) {
      if (element instanceof HTMLElement) {
        const rate = scrolled * -0.5;
        element.style.transform = 'translateY(' + rate + 'px)';
      }
    });
  });
  
  // Intersection Observer for animations
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px'
  };
  
  const observer = new IntersectionObserver(function(entries) {
    entries.forEach(function(entry) {
      if (entry.isIntersecting && entry.target instanceof HTMLElement) {
        entry.target.style.animationPlayState = 'running';
      }
    });
  }, observerOptions);
  
  document.querySelectorAll('.mission-card, .vertical-card').forEach(function(el) {
    observer.observe(el);
  });
</script>
