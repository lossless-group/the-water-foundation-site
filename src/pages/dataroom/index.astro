---
import BaseThemeLayout from '@layouts/BaseThemeLayout.astro';
import ChecklistItems from '@components/dataroom/ChecklistItems.astro';

// Page metadata
const title = 'Dataroom Overview';
const subtitle = 'A complete, LP-ready checklist for reviewing Fund I materials';
const eyebrow = 'VC Dataroom';

// Checklist data
type ChecklistItem = {
  label: string;
  children?: ChecklistItem[];
};

type ChecklistSection = {
  id: string;
  title: string;
  description?: string;
  items: ChecklistItem[];
};

const checklistSections: ChecklistSection[] = [
  {
    id: 'intro-materials',
    title: 'Intro Materials',
    description: 'First-pass orientation materials that establish the story, terms, and what to read next.',
    items: [
      { label: 'Intro Deck' },
      { label: 'One Pager' },
      { label: 'Fund Terms (to the extent set), Disclaimer' },
    ],
  },
  {
    id: 'team',
    title: 'Team',
    description: 'Credentials, references, and investor-ready evidence of operator/investor capability.',
    items: [
      { label: 'Team Bios' },
      { label: 'Team Extended Bios' },
      { label: 'Team CVs' },
      { label: 'Letters of Recommendation / Testimonials / References' },
      {
        label: 'Team Previous Track Record',
        children: [
          {
            label: 'Individual Visual Dealsheets',
            children: [
              { label: 'Company' },
              { label: 'Date of Investment' },
              { label: 'Round Stage at Investment' },
              { label: 'Coinvestors' },
              { label: 'Current MOIC' },
              { label: 'Current Horizon IRR' },
            ],
          },
        ],
      },
    ],
  },
  {
    id: 'track-record',
    title: 'Track Record',
    description: 'Portfolio evidence from the proto-fund and prior roles, standardized for LP diligence.',
    items: [
      {
        label: 'Combined Track Record',
        children: [
          { label: 'Company' },
          { label: 'Date of Investment' },
          { label: 'Round Stage at Investment' },
          { label: 'Coinvestors' },
          { label: 'Current MOIC' },
          { label: 'Current Horizon IRR' },
        ],
      },
      { label: '3 Success Case Studies, with References if available.' },
      { label: '3 Lessons Learned Case Studies' },
    ],
  },
  {
    id: 'ppm',
    title: 'Private Placement Memorandum',
    description: 'Formal fund documentation and the sections LPs diligence most.',
    items: [{ label: 'Market Opportunity Section' }],
  },
  {
    id: 'imprint-legal',
    title: 'Imprint / Legal',
    description: 'Entity formation, standing, and governance artifacts.',
    items: [
      { label: 'Incorporation Documents' },
      { label: 'Good Standing Documents' },
      { label: 'Partner Agreements' },
    ],
  },
  {
    id: 'thesis-pipeline',
    title: 'Thesis & Pipeline',
    description: 'How you win (thesis) and how you deploy (pipeline), supported by concrete examples.',
    items: [
      { label: '2-page Thesis Briefs (Segment / Sector / Stage)' },
      {
        label: 'Deal Sheets',
        children: [
          { label: '3 Example Deals from last year (would have done if in market)' },
          { label: '3 Example Pipeline Deals' },
          { label: '3 Anti-Portfolio Deals (passed or missed due to lack of capital)' },
        ],
      },
      { label: 'Export / Spreadsheet of Current Pipeline' },
      { label: 'Sourcing Advantages (networks, relationships, events)' },
    ],
  },
  {
    id: 'double-click',
    title: 'Double Click Materials',
    description: 'Optional depth for LPs who want additional evidence and detail.',
    items: [
      { label: 'Extended Slide Deck' },
      { label: 'Extended Market Research' },
      { label: 'Media Kit / Mentions / Publications' },
    ],
  },
  {
    id: 'portfolio-model',
    title: 'Portfolio Model',
    description: 'How the fund translates strategy into construction, sizing, and outcome distributions.',
    items: [
      { label: 'Portfolio Construction' },
      { label: 'Investment Period / Pacing Schedule' },
      { label: 'Sensitivity Analysis (based on capital raise amount)' },
      { label: 'Pretend Returns Forecasts (with fill-in-the-blank realtime updates)' },
    ],
  },
  {
    id: 'lp-social-proof',
    title: 'LP Social Proof',
    description: 'Momentum and validation, appropriately redacted and probability-weighted.',
    items: [
      { label: 'Spreadsheet / Export of Fundraise Pipeline (redacted, probability weighted)' },
      { label: 'Letters of intent / letters of reference from LPs' },
    ],
  },
];
---

<BaseThemeLayout title="Dataroom | The Water Foundation">

  <main class="dataroom-page">
    <header class="py-16 px-6">
      <div class="max-w-5xl mx-auto text-center">
        <div
          class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary-500/10 border border-primary-500/20 text-primary-300 text-sm mb-6"
        >
          <span>{eyebrow}</span>
        </div>

        <h2
          class="text-4xl sm:text-5xl font-bold mb-4 bg-gradient-to-r from-white via-primary-200 to-primary-400 bg-clip-text text-transparent"
        >
          {title}
        </h2>

        <p class="text-lg text-foreground/60 max-w-3xl mx-auto">{subtitle}</p>

        <!-- Print / Save PDF Button -->
        <div class="mt-8">
          <button
            type="button"
            id="print-btn"
            class="inline-flex items-center gap-2 rounded-full border border-primary-500/30 bg-primary-500/10 px-5 py-2.5 text-sm font-medium text-primary-300 hover:bg-primary-500/20 hover:border-primary-500/50 transition-colors"
          >
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
            Download Checklist PDF
          </button>
        </div>
      </div>
    </header>

    <section id="checklist" class="variant-section">

      <div class="max-w-6xl mx-auto px-6 pb-24">
        <div class="grid gap-6 md:grid-cols-2 xl:grid-cols-3">
          {checklistSections.map((section) => (
            <article
              class="group rounded-2xl border border-border bg-card shadow-sm overflow-hidden"
              data-section-id={section.id}
            >
              <div class="p-6">
                <div class="flex items-start justify-between gap-4">
                  <div class="min-w-0">
                    <h3 class="text-lg font-semibold text-foreground">{section.title}</h3>
                    {section.description ? (
                      <p class="mt-2 text-sm text-foreground/60 leading-relaxed">
                        {section.description}
                      </p>
                    ) : null}
                  </div>

                  <div
                    class="shrink-0 h-10 w-10 rounded-xl border border-primary-500/30 bg-primary-500/10 text-primary-300 flex items-center justify-center"
                    aria-hidden="true"
                  >
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" class="opacity-90">
                      <path
                        d="M9 11l3 3L22 4"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                      <path
                        d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                      />
                    </svg>
                  </div>
                </div>

                <div class="mt-5">
                  <ChecklistItems items={Array.isArray(section.items) ? section.items : []} />
                </div>
              </div>

              <div class="h-px w-full bg-gradient-to-r from-transparent via-primary-500/30 to-transparent" />
              <div class="px-6 py-4 text-xs text-foreground/50">
                <span class="uppercase tracking-wider">Section</span>
                <span class="mx-2 text-border">/</span>
                <span class="font-mono">{section.id}</span>
              </div>
            </article>
          ))}
        </div>

        <div
          class="mt-12 rounded-2xl border border-border bg-card p-6 md:p-8 text-center"
        >
          <div class="text-sm text-foreground/50">Recommended reading order</div>
          <div class="mt-2 text-lg font-semibold text-foreground">
            Intro Materials → Team → Track Record
          </div>
          <div class="mt-2 text-sm text-foreground/60 max-w-2xl mx-auto">
            Start with the story and terms, validate the team, then diligence the proto-fund and prior track record.
          </div>
        </div>
      </div>
    </section>
  </main>
</BaseThemeLayout>

<style>
  .variant-section {
    position: relative;
    border-bottom: 1px solid var(--color-border);
  }

  .variant-label {
    position: absolute;
    top: 1rem;
    right: 1rem;
    z-index: 50;
    padding: 0.5rem 1rem;
    background: var(--color-card);
    border: 1px solid var(--color-border);
    border-radius: 0.5rem;
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--color-foreground);
  }

  /* Print styles for PDF export */
  @media print {
    /* Override CSS custom properties for print */
    :root,
    .dataroom-page,
    .dataroom-page * {
      --color-foreground: #000 !important;
      --color-background: #fff !important;
      --color-card: #fff !important;
      --color-border: #ccc !important;
    }

    /* Hide non-essential elements */
    #print-btn,
    nav,
    footer,
    .variant-label {
      display: none !important;
    }

    /* Reset dark theme colors for print */
    .dataroom-page {
      background: white !important;
      color: black !important;
    }

    /* Force all text to be dark */
    .dataroom-page,
    .dataroom-page * {
      color: #222 !important;
      -webkit-print-color-adjust: exact !important;
      print-color-adjust: exact !important;
    }

    .dataroom-page header {
      padding: 1rem 0 !important;
      text-align: left !important;
    }

    .dataroom-page header h2 {
      background: none !important;
      -webkit-background-clip: unset !important;
      background-clip: unset !important;
      -webkit-text-fill-color: black !important;
      color: black !important;
      font-size: 1.5rem !important;
    }

    .dataroom-page header p {
      color: #444 !important;
    }

    .dataroom-page header .inline-flex {
      display: none !important;
    }

    /* Grid layout for print - 2 columns */
    .dataroom-page .grid {
      display: grid !important;
      grid-template-columns: repeat(2, 1fr) !important;
      gap: 1rem !important;
    }

    /* Card styling for print */
    .dataroom-page article {
      border: 1px solid #ccc !important;
      border-radius: 0.5rem !important;
      background: white !important;
      page-break-inside: avoid;
      break-inside: avoid;
    }

    .dataroom-page article h3 {
      color: black !important;
      font-size: 0.875rem !important;
    }

    .dataroom-page article p {
      color: #555 !important;
      font-size: 0.75rem !important;
    }

    /* Checklist items for print - force dark text */
    .dataroom-page ul,
    .dataroom-page ul *,
    .dataroom-page li,
    .dataroom-page li * {
      color: #333 !important;
    }

    .dataroom-page li {
      font-size: 0.7rem !important;
    }

    /* Nested list border */
    .dataroom-page ul.border-l,
    .dataroom-page ul[class*="border-l"] {
      border-color: #ccc !important;
    }

    /* Icon box for print */
    .dataroom-page article .shrink-0,
    .dataroom-page span[class*="inline-flex"][class*="items-center"] {
      border-color: #999 !important;
      background: #f0f0f0 !important;
      color: #555 !important;
    }

    /* Section footer */
    .dataroom-page article > div:last-child {
      color: #666 !important;
    }

    .dataroom-page .h-px {
      background: #ddd !important;
    }

    /* Hide the "Recommended reading order" box in print */
    .dataroom-page > section > div > div:last-child {
      display: none !important;
    }

    /* Page setup */
    @page {
      margin: 0.5in;
      size: letter;
    }
  }
</style>

<script>
  document.getElementById('print-btn')?.addEventListener('click', () => {
    window.print();
  });
</script>
